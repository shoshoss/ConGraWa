<%= form_with model: @post,
              data: { controller: "post-modal", 
              action: "turbo:submit-end->post-modal#afterClose" } do |f| %>
  <%= render 'shared/error_messages', object: f.object %>

  <div class="form-control pt-2">
    <%= f.label :body, class: "block text-lg font-semibold" %>
    <%= f.text_area :body, class: "block w-full mt-1 p-2 text-sm md:text-lg border-2 border-gray-300 rounded-lg focus:outline-none focus:border-blue-500 resize-y", rows: "3", style: "resize: vertical;" %>

    <script>
      document.addEventListener('input', function (event) {
        if (event.target.tagName.toLowerCase() !== 'textarea') return;
        event.target.style.height = 'auto';
        event.target.style.height = (event.target.scrollHeight) + 'px';
      });
    </script>
  </div>

  <section class="sound-clips">
    <!-- 音声クリップはここに表示 -->
  </section>

  <%= f.file_field :audio, direct_upload: true, class: "hidden" %>
  <%= f.hidden_field :duration, class: "duration-field" %>

  <div class="form-control mt-4 lg:mt-6">
    <%= f.submit nil, class: "btn text-xl bg-blue-600 hover:bg-blue-700 text-white font-semibold py-2 px-4 rounded disabled:opacity-50" %>
  </div>
<% end %>
