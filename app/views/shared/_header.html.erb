<!-- ヘッダーのHTML -->
<div id="after-header" class="navbar">
  <div class="flex items-center justify-between w-full">
    <!-- ロゴ -->
    <div class="hidden md-plus:block shrink-0 mx-5">
      <%= link_to profile_show_path(current_user.username_slug) do %>
        <%= image_tag 'wave_orange.png', alt: 'ロゴ', class: "h-[48px] lg:h-[64px] w-[200px] lg:w-[250px] rounded-full" %>
      <% end %>
    </div>
    <div class="md-plus:hidden mx-2">
      <%= link_to profile_show_path(current_user.username_slug) do %>
        <%= image_tag asset_path('wave_orange_sm_c.png'), alt: 'ロゴ', class: "rounded-full h-[50px] w-[50px]" %>
      <% end %>
    </div>

    <!-- ユーザー数と投稿数の表示（デスクトップ） -->
    <div class="flex justify-center items-center text-lg space-x-2">
      <span class="hidden md-plus:flex text-lg">
        応援チャンス数: <strong><%= turbo_frame_tag "likes_chance_count" do %><%= @likes_chance_count %><% end %></strong>
      </span>
      <% if current_user.guest %>
        <%= link_to '応援をする！', profile_show_path(username_slug: current_user.username_slug, category: 'all_likes_chance'), class: 'hidden sm-plus:flex btn btn-outline btn-secondary rounded-full sm-plus:btn-md sm-plus:text-lg' %>
      <% else %>
        <%= link_to '応援をする！', profile_show_path(username_slug: current_user.username_slug, category: 'all_likes_chance'), class: 'btn btn-outline btn-secondary btn-sm rounded-full text-sm sm-plus:btn-md sm-plus:text-lg' %>
      <% end %>
    </div>

    <!-- ナビゲーションリンク（PC） -->
    <div class="hidden sm:flex flex-1 justify-end items-center space-x-4">
      <% if current_user.guest %>
        <%= link_to '引き継ぎ登録',
                    new_signup_modal_path,
                    id: "guest-update",
                    class: 'btn btn-outline btn-accent flex text-lg rounded-full transition-colors duration-300 px-4 py-2',
                    data: { turbo_frame: "signup_modal" } %>
      <% end %>
      <!-- 投稿ボタン -->
      <%= link_to t('header.post_audio'),
                  new_post_path,
                  class: "hidden sm:flex text-white font-bold text-xl btn btn-info rounded-full transition-colors duration-300 px-4 py-2",
                  data: { turbo_frame: "post_modal" } %>
      
      <!-- ユーザーメニュー -->
      <div class="dropdown dropdown-hover dropdown-end ml-2 shrink-0">
        <label tabindex="0" class="btn btn-ghost rounded-btn">
          <%= image_tag (current_user.avatar.presence || asset_path('wave_sm_c.svg')), class: "rounded-full h-10 w-10 min-w-[40px] md:h-12 md:w-12" %>
        </label>
        <ul tabindex="0" class="menu dropdown-content p-2 shadow bg-base-100 rounded-box" style="min-width: 300px; max-width: 600px;">
          <li class="py-2">
            <%= link_to t('header.about'), root_path, class: "text-lg hover:bg-sky-100 rounded-full transition-colors duration-300 px-4 #{active_if(root_path)}" %>
          </li>
          <li class="block py-2">
            <%= link_to 'プロフィール', profile_show_path(current_user.username_slug), class: "text-lg hover:bg-sky-100 rounded-full transition-colors duration-300 px-4 #{active_if(profile_show_path(current_user.username_slug))}" %>
          </li>
          <li class="block py-2 text-lg">
            <span class="hidden md-plus:flex text-lg">
              応援チャンス数: <strong><%= turbo_frame_tag "likes_chance_count" do %><%= @likes_chance_count %><% end %></strong>
            </span>
            <%= link_to '応援をする！', profile_show_path(username_slug: current_user.username_slug, category: 'all_likes_chance'), class: "text-lg hover:bg-sky-100 rounded-full transition-colors duration-300 px-4 #{active_if(profile_show_path(username_slug: current_user.username_slug, category: 'all_likes_chance'))}" %>
          </li>
          <li class="py-2">
            <%= link_to t('header.post_index'), posts_path, class: "text-lg md:text-lg py-2 px-4 hover:bg-sky-100 rounded-full transition-colors duration-300 #{active_if(posts_path)}" %>
          </li>
          <li class="block py-2">
            <%= link_to t('header.logout'), logout_path, method: :delete, data: { turbo_method: :delete }, class: "text-lg hover:bg-sky-100 rounded-full transition-colors duration-300 px-4" %>
          </li>
        </ul>
      </div>
    </div>

    <!-- ナビゲーションリンク（スマホ） -->
    <div class="sm:hidden flex flex-1 justify-end items-center space-x-2">
      <% if current_user.guest %>
        <%= link_to '引き継ぎ登録',
                    new_signup_modal_path,
                    id: "guest-update-mobile",
                    class: 'btn btn-outline btn-accent btn-sm rounded-full transition-colors duration-300',
                    data: { turbo_frame: "signup_modal" } %>
      <% end %>

      <!-- 投稿ボタン -->
      <%= link_to t('header.post_audio'),
                  new_post_path,
                  class: "font-bold btn btn-info btn-sm rounded-full transition-colors duration-300 py-2",
                  data: { turbo_frame: "post_modal" } %>

      <!-- ユーザーメニュー -->
      <div class="dropdown dropdown-hover dropdown-end shrink-0">
        <label tabindex="0" class="btn btn-ghost rounded-btn px-2">
          <%= image_tag (current_user.avatar.presence || asset_path('wave_sm_c.svg')), class: "rounded-full h-10 w-10 min-w-[35px]" %>
        </label>
        <ul tabindex="0" class="menu dropdown-content p-2 shadow bg-base-100 rounded-box" style="min-width: 250px; max-width: 600px;">
          <li class="py-2">
            <%= link_to t('header.about'), root_path, class: "text-lg hover:bg-sky-100 rounded-full transition-colors duration-300 px-4 #{active_if(root_path)}" %>
          </li>
          <li class="py-2">
            <%= link_to 'プロフィール', profile_show_path(current_user.username_slug), class: "text-lg hover:bg-sky-100 rounded-full transition-colors duration-300 px-4 #{active_if(profile_show_path(current_user.username_slug))}" %>
          </li>
          <li class="block py-2 text-lg">
            <span class="text-lg">応援チャンス数: <strong><%= @likes_chance_count %></strong></span>
            <%= link_to '応援をする！', profile_show_path(username_slug: current_user.username_slug, category: 'all_likes_chance'), class: "text-lg hover:bg-sky-100 rounded-full transition-colors duration-300 px-4 #{active_if(profile_show_path(username_slug: current_user.username_slug, category: 'all_likes_chance'))}" %>
          </li>
          <li class="py-2">
            <%= link_to t('header.post_index'), posts_path, class: "block text-lg py-2 px-4 hover:bg-sky-100 rounded-full transition-colors duration-300 #{active_if(posts_path)}" %>
          </li>
          <li class="py-2">
            <%= link_to 'ログアウト', logout_path, method: :delete, data: { turbo_method: :delete }, class: "text-lg hover:bg-sky-100 rounded-full transition-colors duration-300 px-4" %>
          </li>
        </ul>
      </div>
    </div>
  </div>
</div>
